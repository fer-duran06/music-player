<div class="search-view">
  <!-- Barra de bÃºsqueda (mismo estilo que la pÃ¡gina inicial) -->
  <div class="search-bar-container">
    <button class="btn-back-home" (click)="goBack()" title="Volver al inicio">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
      <span>Inicio</span>
    </button>
    
    <div class="search-input-wrapper">
      <input 
        type="text" 
        class="search-input" 
        placeholder="ğŸ” BUSCAR MÃšSICA..."
        [(ngModel)]="searchQuery"
        (keyup.enter)="onSearchInput()"
        (input)="onSearchInputWithDebounce()"
        (focus)="showSuggestions = true"
        (blur)="hideSuggestions()">
      
      <!-- Sugerencias de autocompletado -->
      <div class="autocomplete-suggestions" *ngIf="showSuggestions && suggestions.length > 0">
        <div 
          *ngFor="let suggestion of suggestions" 
          class="suggestion-item"
          (mousedown)="selectSuggestion(suggestion)">
          <svg class="suggestion-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/>
            <path d="M21 21l-4.35-4.35"/>
          </svg>
          <span>{{ suggestion }}</span>
        </div>
      </div>
      
      <button 
        *ngIf="searchQuery" 
        class="btn-clear-search" 
        (click)="clearSearch()"
        title="Limpiar bÃºsqueda">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"/>
          <line x1="6" y1="6" x2="18" y2="18"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Contenedor de resultados con scroll -->
  <div class="search-results-container">
    
    <!-- Loading -->
    <div *ngIf="isLoading" class="loading-container">
      <div class="spinner"></div>
      <p>Buscando...</p>
    </div>

    <!-- Estado inicial (sin bÃºsqueda) -->
    <div *ngIf="!hasSearched && !isLoading" class="empty-state">
      <div class="empty-icon">ğŸµ</div>
      <h2>Busca tu mÃºsica favorita</h2>
      <p>Encuentra canciones, artistas y Ã¡lbumes</p>
    </div>

    <!-- Resultados de bÃºsqueda -->
    <div *ngIf="searchResults$ | async as results" class="search-results">
      
      <!-- Sin resultados -->
      <div *ngIf="!isLoading && hasSearched && (!results.tracks.length && !results.albums.length && !results.artists.length)" class="no-results">
        <div class="no-results-icon">ğŸ”</div>
        <h2>No se encontraron resultados para "{{ searchQuery }}"</h2>
        <p>Intenta usar otras palabras clave</p>
      </div>

      <!-- Artistas (PRIMERO) -->
      <div *ngIf="!isLoading && results.artists.length > 0" class="results-section">
        <h2 class="section-title">ğŸ¤ Artistas</h2>
        <div class="artists-grid">
          <div 
            *ngFor="let artist of results.artists" 
            class="artist-card">
            <img [src]="artist.imageUrl" [alt]="artist.name" class="artist-image">
            <div class="artist-info">
              <h3 class="artist-name">{{ artist.name }}</h3>
              <p class="artist-meta">
                <span class="artist-type">Artista</span>
                <span *ngIf="artist.genres.length > 0" class="artist-genres">
                  {{ artist.genres.slice(0, 2).join(', ') }}
                </span>
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Canciones (SEGUNDO) -->
      <div *ngIf="!isLoading && results.tracks.length > 0" class="results-section">
        <h2 class="section-title">ğŸµ Canciones</h2>
        <div class="tracks-grid">
          <div 
            *ngFor="let track of results.tracks" 
            class="track-card"
            (click)="playTrack(track)">
            <img [src]="track.imageUrl" [alt]="track.name" class="track-image">
            <div class="track-info">
              <h3 class="track-name">{{ track.name }}</h3>
              <p class="track-artist">{{ track.artists }}</p>
              <p class="track-album">{{ track.album }}</p>
            </div>
            <button class="btn-play-track">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Ãlbumes (TERCERO) -->
      <div *ngIf="!isLoading && results.albums.length > 0" class="results-section">
        <h2 class="section-title">ğŸ’¿ Ãlbumes</h2>
        <div class="albums-grid">
          <div 
            *ngFor="let album of results.albums" 
            class="album-card"
            (click)="loadAlbum(album.id)">
            <img [src]="album.imageUrl" [alt]="album.name" class="album-image">
            <div class="album-info">
              <h3 class="album-name">{{ album.name }}</h3>
              <p class="album-artist">{{ album.artist }}</p>
              <p class="album-meta">
                <span>{{ album.releaseDate.split('-')[0] }}</span>
                <span class="separator">â€¢</span>
                <span>{{ album.totalTracks }} canciones</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>